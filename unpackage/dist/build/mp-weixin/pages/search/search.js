"use strict";const e=require("../../common/vendor.js"),s=require("../../config.js"),t={data:()=>({isHotWordsShow:"",isResultsShow:"",isKeywordsSearch:"",link:"",content:"",hotWords:"",searchResults:"",isMethodsShow:!0,methods:["内容检索","标题检索","关键词检索"],searchMethod:"",isShow:"",currentItem:""}),onReady(){this.getServerData()},created(){e.index.request({url:s.config.url+"/searchWord/hot",method:"GET",success:e=>{console.log(e),this.hotWords=e.data.data.records}})},methods:{getDetail(s){const t=this.searchResults[s].filename;e.index.navigateTo({url:"/pages/detail/detail?filename="+t})},searchHotWords(t){const o=this.hotWords[t].keyword;this.isResultsShow=!1,e.index.request({url:s.config.url+"/search/keyword?keyword="+o+"&page=1&pageSize=10",method:"GET",success:e=>{console.log(e),this.searchResults=e.data.data.records,this.isHotWordsShow=!1,this.isResultsShow=!1,this.isKeywordsSearch=!0,this.isMethodsShow=!1}})},like(t){const o=this.searchResults[t].filename;e.index.request({url:s.config.url+"/article/approve",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{filename:o,userId:""},success:e=>{console.log(e)}})},click(t){const o=this.searchResults[t].filename,r=this.content;e.index.request({url:s.config.url+"/article/click?filename="+o+"&keyword"+r,method:"POST",success:e=>{console.log(e)}})},favor(t){const o=this.searchResults[t].filename;e.index.request({url:s.config.url+"/article/star",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{filename:o,userId:""},success:s=>{console.log(s),1==s.data.code&&e.index.showToast({title:"收藏成功",icon:"success"})}})},search(){const t=this.content;let o="";"内容检索"==this.searchMethod?(this.isResultsShow=!0,o="content"):"标题检索"==this.searchMethod?(this.isResultsShow=!0,o="title"):"关键词检索"==this.searchMethod&&(o="keyword",this.isResultsShow=!1,this.isKeywordsSearch=!0),""==o?e.index.showToast({title:"请选择检索方式！",icon:"none"}):(console.log(t,o),e.index.request({url:s.config.url+"/search/"+o+"?keyword="+t+"&page=1&pageSize=10",method:"GET",success:e=>{console.log(e),this.searchResults=e.data.data.records,this.isHotWordsShow=!1}}))},confirm(){this.isMethodsShow=!1,this.searchMethod=this.methods[Number(this.link)]},select(e){this.link=e},activeWord(e){if(-1!=e.currentIndex){let s=this.chartData.series[e.currentIndex];console.log(s),this.currentItem=s,this.isShow=!0}},getServerData(){setTimeout((()=>{this.chartData=JSON.parse(JSON.stringify({series:[]}))}),500)}}};const o=e._export_sfc(t,[["render",function(s,t,o,r,i,h){return e.e({a:i.isShow},i.isShow?{b:e.t(i.currentItem.name),c:e.t(i.currentItem.paraphrase)}:{},{d:e.t(i.searchMethod),e:e.o((e=>i.isMethodsShow=!0)),f:e.o((e=>{i.searchResults=" ",i.isHotWordsShow=!0,i.isResultsShow=!1,i.isKeywordsSearch=!1})),g:i.content,h:e.o((e=>i.content=e.detail.value)),i:e.o(((...e)=>h.search&&h.search(...e))),j:0==i.searchResults.length},(i.searchResults.length,{}),{k:i.isResultsShow},i.isResultsShow?{l:e.f(i.searchResults,((s,t,o)=>({a:e.t(s.filename.length>18?s.filename.substring(0,18)+"…":s.filename),b:e.o((e=>h.getDetail(t))),c:e.t(s.likeCount),d:e.o((e=>h.like(t))),e:e.t(s.clickCount),f:e.o((e=>h.click(t))),g:e.t(s.favoriteCount),h:e.o((e=>h.favor(t)))})))}:{},{m:i.isKeywordsSearch},i.isKeywordsSearch?{n:e.f(i.searchResults,((s,t,o)=>({a:e.t(s.abs),b:e.t(s.keywords),c:e.t(s.likeCount),d:e.o((e=>h.like(t))),e:e.t(s.clickCount),f:e.o((e=>h.click(t))),g:e.t(s.favoriteCount),h:e.o((e=>h.favor(t)))})))}:{},{o:i.isHotWordsShow},i.isHotWordsShow?{p:e.f(i.hotWords,((s,t,o)=>({a:e.t(t+1),b:e.t(s.keyword.length>15?s.keyword.substring(0,15)+"…":s.keyword),c:e.t(s.click),d:e.o((e=>h.searchHotWords(t)))}))),q:e.o((e=>i.isMethodsShow=!1))}:{},{r:i.isMethodsShow},i.isMethodsShow?{s:e.f(i.methods,((s,t,o)=>({a:e.t(s),b:e.n({selected:i.link==t,unselected:i.link!=t}),c:e.o((e=>h.select(t)))}))),t:e.o(((...e)=>h.confirm&&h.confirm(...e)))}:{})}],["__scopeId","data-v-54dba219"]]);wx.createPage(o);
